<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>π“¨ λ°© μ΄λ€ λ°μ‹ μ</title>
</head>
<body>
<h2>π“¨ λ°© μ΄λ€ μ „μ†΅ νμ΄μ§€</h2>

<label>AccessToken:</label><br>
<textarea id="tokenInput" rows="3" cols="70" placeholder="JWT ν† ν°λ§ λ¶™μ—¬λ„£μΌμ„Έμ”"></textarea><br><br>

<label>μΉκµ¬ UUID (Friend-Uuid ν—¤λ”):</label><br>
<input type="text" id="receiverUuid" placeholder="μΉκµ¬ UUID"><br><br>

<label>λ°© μ΄λ¦„ (roomName νλΌλ―Έν„°):</label><br>
<input type="text" id="roomName" placeholder="μ: λ³µμ‹±μ—°μµλ°©-7"><br><br>

<button onclick="sendRoomInvite()">λ°© μ΄λ€ λ³΄λ‚΄κΈ°</button>

<pre id="log" style="background:#eef; padding:10px; height:200px; overflow:auto;"></pre>

<script>
  function log(msg) {
    const area = document.getElementById("log");
    area.textContent += msg + "\n";
    area.scrollTop = area.scrollHeight;
  }

  function sendRoomInvite() {
    const token = document.getElementById("tokenInput").value.trim();
    const friendUuid = document.getElementById("receiverUuid").value.trim();
    const roomName = document.getElementById("roomName").value.trim();

    if (!token || !friendUuid || !roomName) {
      alert("λ¨λ“  ν•„λ“λ¥Ό μ…λ ¥ν•΄μ£Όμ„Έμ”.");
      return;
    }

    const url = `http://localhost:8080/api/users/friends/invite-room?roomName=${encodeURIComponent(roomName)}`;
    fetch(url, {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer ' + token,
        'Friend-Uuid': friendUuid
      }
    })
            .then(res => {
              if (res.ok) {
                log(`β… λ°© μ΄λ€ μ „μ†΅: ${roomName} β†’ ${friendUuid}`);
              } else {
                res.text().then(t => log("β μ‹¤ν¨: " + t));
              }
            })
            .catch(err => log("β μ¤λ¥: " + err));
  }
</script>
</body>
</html>
